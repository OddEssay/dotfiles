---
- hosts: localhost
  become: no
  become_user: root
  vars: 
    install_state: present # Override with: --extra-vars "install_state=latest"

  tasks:
    - name: Install XCode Command Line Tools (Error means already installed)
      shell: xcode-select --install
      ignore_errors: yes

    - name: Use brew bundle to install brew packages in Brewfile
      shell: brew bundle

    - name: Show Hidden Folders in Finder
      shell: defaults write com.apple.finder AppleShowAllFiles YES
      tags: macos

    - name: Install Oh My ZSH
      shell: sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"
      args:
        creates: ~/.oh-my-zsh/oh-my-zsh.sh

    - name: Grab a copy of Powerline patched fonts
      git:
        repo: https://github.com/powerline/fonts.git
        dest: ~/dotfiles/fonts

    - name: Copy Source Code Pro font to ~/Library/Fonts
      copy:
        src: ~/dotfiles/fonts/SourceCodePro/
        dest: ~/Library/Fonts

    - name: Grab the you-should-use OhMyZSH Plugin
      git:
        repo: https://github.com/MichaelAquilina/zsh-you-should-use.git 
        dest: ~/.oh-my-zsh/custom/plugins/you-should-use

    - name: Grab ASDF From git
      git:
        repo: https://github.com/asdf-vm/asdf.git
        dest: ~/.asdf
        version: v0.11.3
      tags:
        - asdf
